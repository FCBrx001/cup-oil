# 多阀室对比分析功能使用说明

## 功能概述

多阀室对比分析功能允许您同时选择多个阀室进行参数对比，支持温度和压力两种参数的实时监测和预测分析。

## 使用方法

### 1. 选择阀室

- **单击阀室**: 在管道可视化界面中点击任意阀室图标即可选择该阀室
- **多选阀室**: 继续点击其他阀室可以添加到对比列表中
- **取消选择**: 再次点击已选择的阀室可以取消选择
- **最大选择数**: 最多可以同时选择 4 个阀室进行对比

### 2. 参数选择

在图表右上角的控制面板中，您可以选择要显示的参数类型：
- **温度**: 显示温度相关的实际值和预测值
- **压力**: 显示压力相关的实际值和预测值
- **同时选择**: 可以同时显示温度和压力参数

### 3. 图表布局说明

根据您的选择，系统会智能切换不同的图表布局：

#### 3.1 无阀室选择（默认状态）
- 显示默认的综合预测图表
- 包含模拟的温度和压力数据

#### 3.2 单阀室选择
- **双参数**: 显示左右分离的温度图表和压力图表
- **单参数**: 显示单个图表，专注于选定的参数类型

#### 3.3 多阀室选择（2-4个阀室）
- **双参数**: 显示左右分离的温度对比图表和压力对比图表
- **单参数**: 显示单个图表，展示所有选中阀室的同类参数对比

### 4. 图表元素说明

#### 4.1 数据线条类型
- **实线**: 表示实际监测数据
- **虚线**: 表示温度预测数据
- **点线**: 表示压力预测数据

#### 4.2 颜色编码
- 每个阀室使用不同的颜色进行区分
- 温度和压力使用不同的色系（温度偏暖色，压力偏冷色）
- 预测数据的透明度较低，便于与实际数据区分

#### 4.3 图例说明
- 图例位于图表上方，显示所有数据系列
- 格式：`阀室名称-参数类型`（如：阀室1-实际温度）
- 点击图例可以隐藏/显示对应的数据系列

### 5. 交互功能

#### 5.1 阀室管理
- **标签显示**: 选中的阀室会在图表头部显示为标签
- **单个移除**: 点击标签上的 ❌ 按钮可以移除单个阀室
- **全部清空**: 当选择多个阀室时，显示"清空全部"按钮

#### 5.2 数据缩放
- **滑动条**: 图表底部的滑动条可以调整显示的时间范围
- **鼠标操作**: 在图表内使用鼠标滚轮可以进行缩放
- **默认范围**: 初始显示最近50%的数据，可以调整到全部数据

#### 5.3 提示信息
- **鼠标悬停**: 将鼠标悬停在数据点上可以查看详细信息
- **时间显示**: 显示精确的时间（分:秒格式）
- **数值显示**: 温度精确到小数点后2位，压力精确到小数点后3位

### 6. 数据特性

#### 6.1 实时更新
- 数据每5秒自动更新一次
- 保持30个历史数据点的滚动窗口
- 预测数据包含未来20个时间点

#### 6.2 阀室差异化
- 不同阀室的数据会有轻微的基准值差异
- 预测趋势根据阀室编号有所不同（奇数阀室上升趋势，偶数阀室下降趋势）
- 特定阀室（如阀室3、阀室7）具有更明显的趋势变化

### 7. 最佳实践

#### 7.1 对比分析建议
- **相邻阀室对比**: 选择管道上相邻的阀室进行对比，便于发现异常
- **关键点监控**: 重点监控管道的关键节点（如泵站、分输点等）
- **参数关联**: 同时观察温度和压力的变化关联性

#### 7.2 操作建议
- **逐步选择**: 建议先选择1-2个阀室观察，再逐步增加
- **参数切换**: 根据分析需要灵活切换显示的参数类型
- **时间范围**: 根据分析目的调整合适的时间显示范围

### 8. 注意事项

- 选择阀室时会显示相应的提示信息
- 超过最大选择数量时会显示警告信息
- 至少需要选择一种参数类型才能正常显示图表
- 图表会根据窗口大小自动调整，确保最佳显示效果

## 技术特点

- **响应式设计**: 图表会根据容器大小自动调整
- **内存优化**: 只保留必要的历史数据，避免内存泄漏
- **性能优化**: 使用ECharts的高性能渲染引擎
- **用户体验**: 平滑的动画过渡和直观的交互设计

通过以上功能，您可以轻松实现多个阀室之间的参数对比分析，及时发现异常情况并进行相应的处理。

## 技术特性

- **响应式设计**：支持不同屏幕尺寸
- **高性能渲染**：基于ECharts高性能图表库
- **组件化架构**：可复用的Vue组件设计
- **事件驱动**：完整的组件间通信机制

## 更新日志

### v1.1.0 (2024-09-XX)
- ✅ 阀室管理弹窗功能
- ✅ 阀室颜色编码系统
- ✅ 自动管理多阀室选择
- ✅ 改进的视觉反馈系统
- ✅ 黄埔站点样式优化

### v1.0.0 (2024-01-XX)
- ✅ 多阀室选择功能
- ✅ 双参数对比显示
- ✅ 实时数据更新
- ✅ 交互式图表控制
- ✅ 视觉状态反馈
- ✅ 数据预测功能

---

如有问题或建议，请联系开发团队。 